<!doctype html>
<html lang="zh-Hans">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>6.3 后训练方向：安全风格、工具格式与领域适配｜Transformer × LLM 学习站</title>
  <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="./assets/site.css" />
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@11.9.0/styles/vs2015.min.css" />
  <script>
    window.MathJax = {
      tex: {
        inlineMath: [['$','$'], ['\\(','\\)']],
        displayMath: [['$$','$$'], ['\\[','\\]']],
      },
      options: { skipHtmlTags: ['script','noscript','style','textarea','pre','code'] }
    };
  </script>
  <script defer src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js"></script>
  <script defer src="https://cdn.jsdelivr.net/npm/highlight.js@11.9.0/lib/highlight.min.js"></script>
  <script defer src="./assets/site.js"></script>
  <script>
    document.addEventListener('DOMContentLoaded', () => {
      if (window.hljs) window.hljs.highlightAll();
    });
  </script>
</head>
<body>
  <div class="topbar">
    <div class="container topbar-inner">
      <div class="brand">
        <div class="brand-badge"></div>
        <div>
          <div>Transformer × LLM 学习站</div>
          <div class="brand-sub">知识点 6.3</div>
        </div>
      </div>
      <div class="navlinks">
        <a href="./index.html" class="">目录</a>
        <a href="./module-02-transformer.html" class="">Transformer</a>
        <a href="./module-07-alignment.html" class="">对齐</a>
        <a href="./module-08-inference.html" class="">推理</a>
      </div>
    </div>
  </div>

  <div class="container">
    
<div class="hero">
  <h1>6.3 后训练方向：安全风格、工具格式与领域适配</h1>
  <p class="muted">探讨在基础 SFT 之后，如何针对特定业务场景进行专项强化，打造安全、好用且专业的模型。</p>
  <div class="pillrow">
    <span class="pill">模块 6</span>
    <span class="pill"><a href="./module-06-指令微调-sft-与后训练-post-training.html">返回模块页</a></span>
  </div>
</div>

<div class="section">
  <h2>核心知识点详细讲解</h2>

  <h3>1. 安全风格与价值观对齐</h3>
  <p>后训练的一个重要目标是确保模型回复的安全性。这包括：</p>
  <ul>
    <li><strong>拒答策略:</strong> 识别有害指令（如制作炸弹、骚扰言论）并给出标准化的拒答回复。</li>
    <li><strong>风险提示:</strong> 对于法律、医疗等专业咨询，增加必要的风险免责声明。</li>
    <li><strong>避免过度拒答:</strong> 这是一个平衡点。模型如果太敏感，连“如何写一个打仗的游戏”这种无害请求也会拒绝。</li>
  </ul>

  <h3>2. 工具调用 (Tool Use / Function Calling)</h3>
  <p>为了让 LLM 能够使用外部 API（如搜索、计算器、数据库查询），必须进行专项格式训练：</p>
  <ul>
    <li><strong>JSON 格式约束:</strong> 训练模型能够准确输出符合特定 Schema 的 JSON。</li>
    <li><strong>思考-行动-观察 (ReAct) 范式:</strong> 训练模型在回答前先思考，输出调用命令，等待外部反馈后继续回答。</li>
  </ul>

  <h3>3. 领域适配 (Domain Adaptation)</h3>
  <p>针对特定行业（如金融、法律、医疗）的后训练：</p>
  <ul>
    <li><strong>专业术语一致性:</strong> 确保模型在特定上下文下始终使用行业标准术语。</li>
    <li><strong>业务逻辑对齐:</strong> 训练模型遵循行业特有的逻辑流程或合规要求。</li>
  </ul>

  <h3>4. 分阶段训练策略</h3>
  <p>在实际工程中，后训练往往不是一步到位的，而是分阶段进行的：</p>
  <pre><code>阶段 1: 基础能力 SFT (通用指令遵循)
阶段 2: 专项强化 (工具调用、长文本、特定领域)
阶段 3: 偏好与安全对齐 (RLHF / DPO)</code></pre>
</div>

<div class="section">
  <h2>工程要点总结</h2>
  <ul>
    <li><strong>数据比例控制:</strong> 加入安全或工具数据时，要严格控制比例。如果安全数据太多，模型会变得“胆小”且无用；如果工具数据太多，模型的闲聊能力会退化。</li>
    <li><strong>严格 Schema 校验:</strong> 在训练工具调用时，可以使用自动化的逻辑检查生成的 JSON 是否合法，不合法的样本应直接剔除。</li>
    <li><strong>回归评测:</strong> 每增加一种新能力，都要回过头去跑一遍 MMLU 或通用对话 Benchmarks，确保“新技能”没有破坏“老本领”。</li>
  </ul>

  <p>例题与答案：</p>
  <div class="qa">
    <div class="q">Q1：为什么工具调用需要专项数据？</div>
    <div class="a">A1：因为工具调用要求极高的格式精确性（如 JSON 的括号必须闭合）和特定逻辑（如先输出参数，再等待执行结果）。这些特定的行为模式在普通的对话语料中几乎不存在，模型无法仅通过通用训练自发习得这种“严谨性”。</div>
  </div>
  <div class="qa">
    <div class="q">Q2：后训练为什么要分阶段？</div>
    <div class="a">A2：不同的训练目标往往存在冲突。例如，强化安全性可能会导致模型有用性下降；强化工具格式可能会让回答变得生硬。分阶段训练允许工程师精细化地调整每一步的配比和超参数，更早地发现并定位能力回退（Regression）的原因。</div>
  </div>
</div>

    <div class="pager">
      <a href="kp-6-2-sft-训练策略-全参-vs-peft-lora-qlora.html"><strong>6.2 SFT 训练策略：全参 vs PEFT（LoRA/QLoRA）</strong></a>
      <a href="module-07-对齐-alignment-rlhf-dpo-rlvr-等.html"><strong>7 对齐（Alignment）：RLHF / DPO / RLVR 等</strong></a>
    </div>
    <div class="footer">
      <div>© 2026 Transformer × LLM 学习站</div>
    </div>
  </div>
</body>
</html>